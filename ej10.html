<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<script type="text/javascript" src="niveles.js"></script>
<link rel="stylesheet" type="text/css" href="estilo.css">
</head>
<script>

window.onload = function () {

    juego = new Arkanoid(2, 1, false);
    
}
// - - - - - - - - - -     C L A S E     P E L O T A    - - - - - - - - - - - 

function Pelota(anchoYalto, x, y, pasoX, pasoY, intervalo, derechaX, arribaY, estaEnMovimiento, color, contenedora, arrayPelotas) {
    this.anchoYalto = anchoYalto;
    this.anchoYaltoPx = window.innerWidth * contenedora.anchoCajaJuego/100 * (anchoYalto/100);
    this.radio = this.anchoYaltoPx / 2;
    this.x = x;
    this.y = y;
    this.pasoX = pasoX;
    this.pasoY = pasoY;
    this.intervalo = intervalo;
    this.derechaX = derechaX;
    this.arribaY = arribaY;
    this.estaEnMovimiento = estaEnMovimiento;
    this.color = color;
    this.contenedora = contenedora;
    this.arrayPelotas = arrayPelotas;
    if(color != undefined)
    {
        this.color = color;
    }
    else
    {
        this.color = "#ff0000";
    }
    this.divPelota = this.crearPelota();
    this.comprobarPosicion();
    this.arrayPelotas.push(this);
}
//Metodos prototipados de pelota
Pelota.prototype.crearPelota = function () {
    var padre = this.contenedora.divContenedora;
    var p = document.createElement("div");
    p.style.width = this.anchoYalto + "%";
    p.style.height = this.anchoYaltoPx + "px";
    p.style.borderRadius = "50%";
    p.style.backgroundColor = this.color;
    p.style.position = "absolute";
    p.style.top = this.y + "px";
    p.style.left = this.x + "px";
    p.className = "pelota";
    padre.appendChild(p);
    return p;
};
Pelota.prototype.avanzarX = function () 
{
    if(this.derechaX)
    {
        this.x += this.pasoX;
    }
    else
    {
        this.x -= this.pasoX;
    }
    this.divPelota.style.left = this.x + "px";
}
Pelota.prototype.avanzarY = function () 
{
    if(this.arribaY)
    {
        this.y -= this.pasoY;
    }
    else
    {
        this.y += this.pasoY;
    }    
    this.divPelota.style.top = this.y + "px";
}
/*
 * Aumenta 1/2 el tamaño de la bola
 */
Pelota.prototype.aumentarTamanio   = function () 
{
    this.anchoYaltoPx = this.anchoYaltoPx + this.anchoYaltoPx * 0.5;
    this.radio = this.anchoYaltoPx/2;
    this.divPelota.style.width =  this.anchoYaltoPx + "px";
    this.divPelota.style.height = this.anchoYaltoPx + "px";
}
/*
 * Reduce 1/2 el tamaño de la bola
 */
Pelota.prototype.reducirTamanio   = function () 
{
    this.anchoYaltoPx = this.anchoYaltoPx - this.anchoYaltoPx * 0.5;
    this.radio = this.anchoYaltoPx/2;
    this.divPelota.style.width =  this.anchoYaltoPx  + "px";
    this.divPelota.style.height = this.anchoYaltoPx  + "px";
}
/*
 * Evita que dos pelotas se pinten en la misma posicion y la va moviendo hasta que ya no colisionan
 *
 */
Pelota.prototype.comprobarPosicion  = function () 
{
    var cenXBola1 = this.x + (this.radio);
    var cenYBola1 = this.y + (this.radio);
    for (var i = 0; i < this.arrayPelotas.length; i++) 
    {
        if(this.arrayPelotas[i] != this)
        {
            var cenXBola2 = this.arrayPelotas[i].x + (this.arrayPelotas[i].radio);
            var cenYBola2 = this.arrayPelotas[i].y + (this.arrayPelotas[i].radio); 
            var distanciaEntrePelotas = 0;
            do
            {
                distanciaEntrePelotas = Math.hypot(cenXBola1 - cenXBola2, cenYBola1 - cenYBola2);
                this.avanzarX();
                this.avanzarY();
                cenXBola1 = this.x + (this.radio);
                cenYBola1 = this.y + (this.radio);
            }
            while( distanciaEntrePelotas <  this.radio + ((this.pasoX + this.pasoY) /2) + this.arrayPelotas[i].radio  + ((this.arrayPelotas[i].pasoX + this.arrayPelotas[i].pasoY) /2));
        }
    }
}
// - - - - - F I N    D E    L A   C L A S E    P E L O T A  - - - - - - -

// - - - - - - - - - -     C L A S E     L A D R I L L O    - - - - - - - - - - - 
function Ladrillo(anchoLadrillo, altoLadrillo, posicionX, posicionY, vida, extra, contenedora, arrayLadrillos)
{
    this.anchoLadrillo = anchoLadrillo;
    this.altoLadrillo = altoLadrillo;
    this.posicionX = posicionX;
    this.posicionY = posicionY;
    this.vida = vida;
    this.extra = 0;
    this.contenedora = contenedora;
    this.arrayLadrillos = arrayLadrillos;

    //Si tiene algun extra
    if(extra != undefined)
    {
        this.extra = extra;
    }
    this.divLadrillo = this.crearLadrillo();
    this.arrayLadrillos.push(this);
    
    
}
Ladrillo.prototype.obtenerColor  = function () 
{
    var arrayColores = ["red", "green", "yellow", "purple"];
    return arrayColores[this.vida];

}
Ladrillo.prototype.crearLadrillo  = function () 
{
    var ladrillo = document.createElement("div");
    ladrillo.style.width = this.anchoLadrillo + "%";
    ladrillo.style.height = this.altoLadrillo + "%";
    ladrillo.style.position = "absolute";
    ladrillo.className = "ladrillo";
    ladrillo.style.left = this.posicionX + "%";
    ladrillo.style.top = this.posicionY + "%";
    ladrillo.style.backgroundColor = this.obtenerColor();
    this.contenedora.divContenedora.appendChild(ladrillo);
    return ladrillo;
}
Ladrillo.prototype.quitarVida  = function () 
{
    if(this.vida > 0)
    {
        this.vida--;
        this.actualizarColor();
    }
    else
    {
        this.borrarLadrillo();
    }
}
Ladrillo.prototype.actualizarColor  = function () 
{
    this.divLadrillo.style.backgroundColor = this.obtenerColor();
}
Ladrillo.prototype.borrarLadrillo  = function () 
{
    borrarElemento(this.divLadrillo);
    arrayLadrillos.splice(arrayLadrillos.indexOf(this),1);
}
//- - - - - -  - - - - - -   F I N    D E    C L A S E    L A D R I L L O      - - - - - - - - 

// - - - - - - - - - -     C L A S E     B A R R A     - - - - - - - - - - - 
function Barra(anchoBarra, altoBarra, posicionX, posicionY, color, colorLinea, colorTrianguloCentro, colorTrianguloLados, contenedora)
{
    this.anchoBarra = anchoBarra;
    this.altoBarra = altoBarra;
    this.posicionX = posicionX;
    this.posicionY = posicionY;
    this.color = color;
    this.colorLinea = colorLinea;
    this.colorTrianguloCentro = colorTrianguloCentro;
    this.colorTrianguloLados = colorTrianguloLados;
    this.contenedora = contenedora;
    this.divBarra = this.crearBarra();
    this.divLineaBarra = this.crearLineaBarra();
    this.crearTrianguloCentro = this.crearTrianguloCentro();
    this.divTrianguloIzquierda = this.crearTrianguloIzquierda();
    this.divTrianguloDerecha = this.crearTrianguloDerecha();

}
Barra.prototype.crearBarra  = function () 
{
    var barra = document.createElement("div");
    barra.style.width = this.anchoBarra + "%";
    barra.style.height = this.altoBarra + "%";
    barra.style.position = "absolute";
    barra.className = "barra";
    barra.style.left = window.innerWidth * (this.contenedora.anchoCajaJuego/100)/2 - this.anchoBarra/2 + "px";
    barra.style.top = window.innerHeight * (this.contenedora.altoCajaJuego/100) - this.altoBarra - 50 + "px";
    barra.style.backgroundColor = this.color;
    padre = this.contenedora.divContenedora;
    padre.appendChild(barra);
    return barra;
}
Barra.prototype.crearLineaBarra  = function () 
{
    var lineaBarra = document.createElement("div");
    lineaBarra.style.width = "100%";
    lineaBarra.style.height = "10%";
    lineaBarra.style.position = "absolute";
    lineaBarra.className = "lineaBarra";
    lineaBarra.style.zIndex = -1;
    lineaBarra.style.backgroundColor = this.colorLinea;
    padre = this.contenedora.divContenedora;
    this.divBarra.appendChild(lineaBarra);
    return lineaBarra;
}
Barra.prototype.crearTrianguloCentro  = function () 
{
    var trianguloBarraCentro = document.createElement("div");
    trianguloBarraCentro.style.width = "0px";
    trianguloBarraCentro.style.height = "0px";
    trianguloBarraCentro.style.borderRight= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraCentro.style.borderLeft= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraCentro.style.borderTop= this.anchoBarra/100 +"px solid transparent";
    trianguloBarraCentro.style.borderBottom = this.altoBarra/2 +"px solid" + this.colorTrianguloCentro; 
    
    trianguloBarraCentro.style.position = "absolute";
    //Centrarlo y ponerlo encima de la barra
    trianguloBarraCentro.style.left = this.anchoBarra/2 - this.anchoBarra/10 + "px";
    trianguloBarraCentro.style.top = -this.anchoBarra/100 - this.altoBarra/2+ "px";
    trianguloBarraCentro.className = "trianguloBarraCentro";
    trianguloBarraCentro.style.zIndex = -1;
    padre = document.getElementById("contenedor");
    this.divBarra.appendChild(trianguloBarraCentro);
    return trianguloBarraCentro;
}
Barra.prototype.crearTrianguloIzquierda  = function () 
{
    var trianguloBarraIzquierda = document.createElement("div");
    trianguloBarraIzquierda.style.width = "0px";
    trianguloBarraIzquierda.style.height = "0px";
    trianguloBarraIzquierda.style.borderRight= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraIzquierda.style.borderLeft= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraIzquierda.style.borderTop= this.anchoBarra/100 +"px solid transparent";
    trianguloBarraIzquierda.style.borderBottom = this.altoBarra/2 +"px solid" + this.colorTrianguloLados; 
    
    trianguloBarraIzquierda.style.position = "absolute";
    //Poner a la izquierda y ponerlo encima de la barra
    trianguloBarraIzquierda.style.left = 0 + "px";
    trianguloBarraIzquierda.style.top = -this.anchoBarra/100 - this.altoBarra/2+ "px";
    trianguloBarraIzquierda.className = "trianguloBarraIzquierda";
    trianguloBarraIzquierda.style.zIndex = -1;
    padre = document.getElementById("contenedor");
    this.divBarra.appendChild(trianguloBarraIzquierda);
    return trianguloBarraIzquierda;
}
Barra.prototype.crearTrianguloDerecha  = function () 
{
    var trianguloBarraIzquierda = document.createElement("div");
    trianguloBarraIzquierda.style.width = "0px";
    trianguloBarraIzquierda.style.height = "0px";
    trianguloBarraIzquierda.style.borderRight= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraIzquierda.style.borderLeft= this.anchoBarra/10 +"px solid transparent";
    trianguloBarraIzquierda.style.borderTop= this.anchoBarra/100 +"px solid transparent";
    trianguloBarraIzquierda.style.borderBottom = this.altoBarra/2 +"px solid" + this.colorTrianguloLados; 
    
    trianguloBarraIzquierda.style.position = "absolute";
    //Poner a la izquierda y ponerlo encima de la barra
    trianguloBarraIzquierda.style.left = this.anchoBarra - (this.anchoBarra/5) + "px";
    trianguloBarraIzquierda.style.top = -this.anchoBarra/100 - this.altoBarra/2+ "px";
    trianguloBarraIzquierda.className = "trianguloBarraIzquierda";
    trianguloBarraIzquierda.style.zIndex = -1;
    padre = document.getElementById("contenedor");
    this.divBarra.appendChild(trianguloBarraIzquierda);
    return trianguloBarraIzquierda;
}
//- - - - - -  - - - - - -   F I N    D E    C L A S E    B A R R A      - - - - - - - - 

// - - - - - - - - - -     C L A S E     A R K A N O I D     - - - - - - - - - - - 
function Arkanoid(numeroJugadores, nivelActual, iniciado)
{
    this.numeroJugadores = numeroJugadores;
    this.nivelActual = nivelActual;
    this.iniciado = iniciado;
    this.intervalo1 = "";
    this.intervalo2 = "";

    arrayPelotas1 = new Array();
    arrayLadrillos1 = new Array();  
    arrayPelotas2 = new Array();
    arrayLadrillos2 = new Array();  

    if(numeroJugadores == 1)
    {
        contenedora = new Contenedora(80, 100, 0, 0, "#d6d6d6");
        informacion = new Informacion(contenedora, null, 20, "#0b0b0b");
        new Pelota(5, 20, 100, 1, 4, 5, true, false, true, "green", contenedora, arrayPelotas1);
        this.intervalo = this.comenzarJuegoJ1();
    }
    else if(numeroJugadores == 2)
    {

        // J1
        contenedora = new Contenedora(40, 100, 0, 0, "#d6d6d6");
        new Pelota(5, 20, 100, 1, 4, 5, true, false, true, "green", contenedora, arrayPelotas1);
        new Barra(20, 3, 0, 0, "#654321", "#ff0000", "#0000ff", "#00ff00", contenedora);
        informacion = new Informacion(contenedora, contenedora, 20, "#0b0b0b");
        // J2
        contenedora1 = new Contenedora(40, 100, window.innerWidth* (contenedora.anchoCajaJuego/100 + informacion.anchoInformacion/100), 0, "#d6d6ff");
        new Pelota(5, 100, 200, 1, 4, 5, true, false, true, "red", contenedora1, arrayPelotas2);
        new Barra(20, 3, 0, 0, "#654321", "#ff0000", "#0000ff", "#00ff00", contenedora1);

        this.intervalo1 = this.comenzarJuegoJ1();
        this.intervalo2 = this.comenzarJuegoJ2();

    }
    this.pintarNivel();

}
Arkanoid.prototype.pintarNivel  = function () 
{
    var posicionInicial = contenedora.posicionX + 1;
    var separacion = 1;
    var altoInicial = 3;
    for (var i = 0; i<niveles[this.nivelActual].nivel.length;i++) 
    {
        for (var j = 0; j<niveles[this.nivelActual].nivel[i].linea.length;j++) 
        {
            if(posicionInicial + 8 > 100)
            {
                altoInicial+=6;
                posicionInicial = contenedora.posicionX +1;
            }
            new Ladrillo(8, 5, posicionInicial, altoInicial, niveles[this.nivelActual].nivel[i].linea[j], 0, contenedora, arrayLadrillos1);
            posicionInicial+= 9;
        }
    }
    
    if(this.numeroJugadores == 2)
    {
        var posicionInicial = contenedora.posicionX + 1;
        var separacion = 1;
        var altoInicial = 3;
        for (var i = 0; i<niveles[this.nivelActual].nivel.length;i++) 
        {
            for (var j = 0; j<niveles[this.nivelActual].nivel[i].linea.length;j++) 
            {
                if(posicionInicial + 8 > 100)
                {
                    altoInicial+=6;
                    posicionInicial = contenedora.posicionX +1;
                }
                new Ladrillo(8, 5, posicionInicial, altoInicial, niveles[this.nivelActual].nivel[i].linea[j], 0, contenedora1, arrayLadrillos1);
                posicionInicial+= 9;
            }
        }
    }
}
Arkanoid.prototype.comenzarJuegoJ1  = function () 
{
    if(this.iniciado == false)
    {
        this.iniciado = true;
    }
    return setInterval(function(){
            mover(arrayPelotas1);
            }, 10);
}
Arkanoid.prototype.comenzarJuegoJ2  = function () 
{
    if(this.iniciado == false)
    {
        this.iniciado = true;
    }
    return setInterval(function(){
            mover(arrayPelotas2);
            }, 10);
}
//- - - - - -  - - - - - -   F I N    D E    C L A S E    A R K A N O I D      - - - - - - - - 

// - - - - - - - - - -     C L A S E     C O N T E N E D O R A     - - - - - - - - - - - 
function Contenedora(anchoCajaJuego, altoCajaJuego, posicionX, posicionY, colorFondo)
{
    this.anchoCajaJuego = anchoCajaJuego;
    this.altoCajaJuego = altoCajaJuego;
    this.posicionX =posicionX;
    this.posicionY = posicionY;
    this.colorFondo = colorFondo;
    this.divContenedora = this.crearContenedora();
}
Contenedora.prototype.crearContenedora  = function () 
{
    var padre = document.body;
    var con = document.createElement("div");
    con.style.position = "absolute";
    con.style.left = this.posicionX + "px";
    con.style.top = this.posicionY + "px";
    con.style.width = this.anchoCajaJuego + "%";
    con.style.height = this.altoCajaJuego + "%";
    con.style.backgroundColor = this.colorFondo;
    con.className = "contenedora";
    con.style.cssFloat = "left";
    padre.appendChild(con);
    return con;
}
//- - - - - -  - - - - - -   F I N    D E    C L A S E    C O N T E N E D O R A      - - - - - - - - 


// - - - - - - - - - -     C L A S E      I N F O R M A C I O N     - - - - - - - - - - - 
function Informacion(contenedor1, contenedor2, anchoInformacion, colorFondo)
{
    this.contenedor1 = contenedor1;
    this.contenedor2 = contenedor2;
    this.altoInformacion = contenedor1.altoCajaJuego;
    this.anchoInformacion = anchoInformacion;
    this.colorFondo = colorFondo;
    this.divInformacion = this.crearInformacion();
    this.divJugador1 = this.crearInfoJugador1();
    if(contenedor2 != undefined)
    {
        this.jugador2 = this.crearInfoJugador2();   
    }
}
Informacion.prototype.crearInformacion  = function () 
{
    var padre = document.body;
    var inf = document.createElement("div");
    inf.style.position = "absolute";
    inf.style.left = window.innerWidth * this.contenedor1.anchoCajaJuego/100 + "px";
    inf.style.top = this.contenedor1.posicionY + "px";
    inf.style.width = this.anchoInformacion + "%";
    inf.style.height = this.altoInformacion + "%";
    inf.style.backgroundColor = this.colorFondo;
    inf.className = "informacion";
    inf.style.cssFloat = "left";
    padre.appendChild(inf);
    return inf;
}
Informacion.prototype.crearInfoJugador1  = function () 
{
    var padre = this.divInformacion;
    var inf = document.createElement("div");
    inf.style.position = "absolute";
    inf.style.width = 96 + "%";
    inf.style.height = 46 + "%";
    inf.style.margin = "2%";
    inf.style.backgroundColor = this.colorFondo;
    inf.className = "informacion";
    var texto = document.createTextNode("Jugador I");
    inf.appendChild(texto);
    padre.appendChild(inf);
    return inf;
}
Informacion.prototype.crearInfoJugador2  = function () 
{
    var padre = this.divInformacion;
    var inf = document.createElement("div");
    inf.style.position = "absolute";
    inf.style.top = 50 + "%";
    inf.style.width = 96 + "%";
    inf.style.height = 46 + "%";
    inf.style.margin = "2%";
    inf.style.backgroundColor = this.colorFondo;
    inf.className = "informacion";
    var texto = document.createTextNode("Jugador II");
    inf.appendChild(texto);
    padre.appendChild(inf);
    return inf;
}
//- - - - - -  - - - - - -   F I N    D E    C L A S E    I N F O R M A C I O N      - - - - - - - - 
//METODOS QUE USAN VARIOS OBJETOS
function borrarElemento(elemento)
{
    if(elemento.parentNode != null)
    {
        elemento.parentNode.removeChild(elemento);
    }
}
function mover(arrayPelotas) {
    //Si solo hay una pelota
    if(arrayPelotas.length <= 1)
    {
        comprobarColisionParedes(arrayPelotas[0]);
        if(arrayPelotas[0].estaEnMovimiento)
        {
            arrayPelotas[0].avanzarY();
            arrayPelotas[0].avanzarX();
        }
    }
    //Si hay mas de una pelotas
    else
    {
        //Pasamos por todas las pelotas
        for (var i = 0; i < arrayPelotas.length; i++) 
        {        
            //comprobarColisionParedes(arrayPelotas[i]);

            for(var j = 0; j < arrayPelotas.length; j++)
            {
                //EVITA QUE SE COMPRUEBE UNA PELOTA CON LA MISMA DEL ARRAY
                if(arrayPelotas[i] != arrayPelotas[j])
                {
                    comprobarColisionPelotas(arrayPelotas[i], arrayPelotas[j]);
                    comprobarColisionParedes(arrayPelotas[j]);

                }
            }
            if(arrayPelotas[i].estaEnMovimiento)
            {
                arrayPelotas[i].avanzarY();
                arrayPelotas[i].avanzarX();
            }
        }
    }   
}
/*
 *Comprueba si al moverse esa pelota colisionara con alguna de las paredes, en ese caso cambia el sentido de la pelota.
 *
 *
 */
function comprobarColisionParedes(pelota) {
    //Choca arriba
    if (pelota.y - pelota.pasoY <= this.contenedora.posicionX && pelota.arribaY) {
        pelota.arribaY = false;
    }
    //Choca abajo
    else if (pelota.pasoY + pelota.y > (window.innerHeight * (pelota.contenedora.altoCajaJuego/100) - pelota.anchoYaltoPx) && !pelota.arribaY) {
    pelota.arribaY = true;
    }
    //Choca derecha
    if (pelota.pasoX + pelota.x >= (window.innerWidth* (contenedora.anchoCajaJuego/100) - pelota.anchoYaltoPx) && pelota.derechaX) {
        pelota.derechaX = !pelota.derechaX;
    }
    //Choca izquierda
    else if (pelota.x - pelota.pasoX <= 0 && !pelota.derechaX) {
        pelota.derechaX = !pelota.derechaX;
    }
}

function comprobarColisionPelotas(pelota1, pelota2) 
{
    //Centros de la pelota 1
    var cenXBola1 = pelota1.x + (pelota1.radio);
    var cenYBola1 = pelota1.y + (pelota1.radio);
    //Centros de la pelota 2
    var cenXBola2 = pelota2.x + (pelota2.radio);
    var cenYBola2 = pelota2.y + (pelota2.radio);
    
    distanciaEntrePelotas = Math.hypot(cenXBola1 - cenXBola2, cenYBola1 - cenYBola2);
    //Si van a colisionar las pelotas en su siguiente paso
    if (distanciaEntrePelotas <  pelota1.radio + ((pelota1.pasoX + pelota1.pasoY) /2) + pelota2.radio  + ((pelota2.pasoX + pelota2.pasoY) /2) + 1)
    {
        //alert("comprobando "+pelota1.color + " con "+pelota2.color + " distancia "+distanciaEntrePelotas + " tope " + (pelota1.radio + pelota2.radio) )
        //si las dos avanzan hacia arriba o abajo  /\  \/
        if(pelota1.arribaY == pelota2.arribaY && pelota1.derechaX != pelota2.derechaX)
        {
            //Si es la mas rapida cambiamos el sentido para que no la sobrepase
            if(pelota1.pasoY >= pelota2.pasoY)
            {
                //pelota1.arribaY = !pelota1.arribaY;
                pelota1.derechaX = !pelota1.derechaX;
                pelota2.derechaX = !pelota1.derechaX;
            }
            else
            {
                pelota2.derechaX = !pelota2.derechaX;
                pelota1.derechaX = !pelota2.derechaX;
            }
            //console.log("choque arriba abajo")
        }
        //si avanzan hacia la izquierda o derecha > <
        else if(pelota1.derechaX == pelota2.derechaX && pelota1.arribaY != pelota2.arribaY)
        {
            //Si es la mas rapida cambiamos el sentido para que no la sobrepase
            if(pelota1.pasoX >= pelota2.pasoX)
            {
                pelota1.arribaY = !pelota1.arribaY;
                pelota1.derechaX = !pelota1.derechaX;
                pelota2.arribaY = !pelota1.arribaY;
            }
            //console.log("choque izquierda o derecha")

        }
        //si avanzan en direccion contraria una contra otra | --
        else if(pelota1.derechaX != pelota2.derechaX && pelota1.arribaY != pelota2.arribaY)
        {
            pelota1.arribaY = !pelota1.arribaY;
            pelota1.derechaX = !pelota1.derechaX;

            pelota2.arribaY = !pelota1.arribaY;
            pelota2.derechaX = !pelota1.derechaX;
            //console.log("choque contrario")
        }
        //Si avanzan en la misma direccion (distinta velocidad)
        else
        {
            //console.log("choque misma direccion")
            if(pelota1.pasoX + pelota1.pasoY >= pelota2.pasoY + pelota2.pasoX)
            {
                pelota1.arribaY = !pelota1.arribaY;
                pelota1.derechaX = !pelota1.derechaX;
            }
            else
            {
                pelota2.derechaX = !pelota2.derechaX;
            }
        }
        //Separamos las pelotas para que no sigan colisionando
        pelota1.avanzarX();
        pelota1.avanzarY();
        pelota2.avanzarX();
        pelota2.avanzarY();
    }
}
</script>

<body>

</body>

</html>